<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="product_template_form_view_custom_prices" model="ir.ui.view">
        <field name="name">product.template.form.custom.prices</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='categ_id']" position="before">
                <field name="x_name_sps"/>
            </xpath>
                        
            <xpath expr="//page[@name='sales']" position="after">
                <page string="Precios Personalizados" name="custom_prices" 
                      groups="inventory_shopping_cart.group_price_authorizer,inventory_shopping_cart.group_seller">
                    <group>
                        <group string="Control de Costos (MXN)" groups="inventory_shopping_cart.group_price_authorizer">
                            <field name="x_costo_mayor" readonly="1" force_save="1" decoration-bf="1"/>
                            <field name="x_utilidad" string="% Utilidad Deseada"/>
                            <p class="text-muted" colspan="2">
                                <i class="fa fa-info-circle"/> El <b>Costo Mayor</b> se actualiza solo si el nuevo costo (compra + fletes) supera al anterior.
                            </p>
                        </group>
                        <group string="Estado de Precios">
                            <div class="alert alert-info" role="alert" colspan="2">
                                <i class="fa fa-refresh fa-spin" invisible="not id"/> 
                                Los precios se calculan automáticamente en base al Costo Mayor y el Tipo de Cambio Banorte.
                            </div>
                        </group>
                    </group>
                    <group>
                        <group string="Escalera MXN">
                            <field name="x_price_mxn_1" readonly="1" force_save="1" string="1. Precio Alto"/>
                            <field name="x_price_mxn_2" readonly="1" force_save="1" string="2. Precio Medio"/>
                            <field name="x_price_mxn_3" readonly="1" force_save="1" string="3. Precio Mínimo" 
                                   groups="inventory_shopping_cart.group_price_authorizer"/>
                        </group>
                        <group string="Escalera USD">
                            <field name="x_price_usd_1" readonly="1" force_save="1" string="1. Precio Alto"/>
                            <field name="x_price_usd_2" readonly="1" force_save="1" string="2. Precio Medio"/>
                            <field name="x_price_usd_3" readonly="1" force_save="1" string="3. Precio Mínimo" 
                                   groups="inventory_shopping_cart.group_price_authorizer"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>