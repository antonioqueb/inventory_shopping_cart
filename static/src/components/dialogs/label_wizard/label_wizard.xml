<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="inventory_shopping_cart.LabelWizard" owl="1">
        <Dialog size="'md'" title="'üñ®Ô∏è Imprimir Etiquetas Zebra'">
            <div class="label-wizard-content p-3">
                <div class="alert alert-info mb-4">
                    Se generar√° un archivo <strong>.zpl</strong> que puede enviar directamente a su impresora Zebra.
                    <br/>
                    <small>Lotes seleccionados: <strong t-esc="props.selectedLots.length"></strong></small>
                </div>

                <div class="row g-3">
                    <t t-foreach="formats" t-as="format" t-key="format.id">
                        <div class="col-12">
                            <div class="format-option card" 
                                 t-att-class="{ 'selected': state.selectedFormat === format.id }"
                                 t-on-click="() => this.selectFormat(format.id)">
                                <div class="card-body d-flex align-items-center">
                                    <div class="format-icon me-3">
                                        <i t-att-class="'fa ' + format.icon + ' fa-2x'"></i>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h6 class="mb-1 fw-bold"><t t-esc="format.name"/></h6>
                                        <small class="text-muted"><t t-esc="format.desc"/></small>
                                    </div>
                                    <div class="selection-check" t-if="state.selectedFormat === format.id">
                                        <i class="fa fa-check-circle fa-2x text-success"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>

            <t t-set-slot="footer">
                <button class="btn btn-light" t-on-click="props.close">Cancelar</button>
                <button class="btn btn-primary" t-on-click="downloadZpl" t-att-disabled="state.isGenerating">
                    <t t-if="!state.isGenerating">
                        <i class="fa fa-download me-2"></i> Descargar ZPL
                    </t>
                    <t t-else="">
                        <i class="fa fa-spinner fa-spin me-2"></i> Generando...
                    </t>
                </button>
            </t>
        </Dialog>
    </t>
</templates>